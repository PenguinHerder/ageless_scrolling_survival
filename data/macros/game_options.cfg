#define GAME_OPTIONS
    [options]
        [combo]
            id=QQ_AESS_map_setting
            default=archipelago
            name=_"Map"
            description=_"Map name (map length)"
            [item]
                name="Forest (24)"
                value=forest
            [/item]
            [item]
                name="Prison (36)"
                value=prison
            [/item]
            [item]
                name="Mountains (48)"
                value=mountains
            [/item]
            [item]
                name="Standard TSW (60)"
                value=standard
            [/item]
            [item]
                name="Great Waters (69)"
                value=waters
            [/item]
            [item]
                name="Archipelago (72)"
                value=archipelago
            [/item]
        [/combo]
		[combo]
			id=QQ_AESS_wave_mode
			default="default"
			name="Wave mode"
			description="Select way the units are spawned"
			[item]
				name="Default (predefined)"
				value=default
			[/item]
			[item]
				name="Mirror (same player)"
				value=same
			[/item]
			[item]
				name="Mirror (opposite player)"
				value=opposite
			[/item]
			[item]
				name="Mirror (alternate every 8 turns)"
				value=alternate
			[/item]
			[item]
				name="Random Faction (changes every 8 turns) / in progress"
				value=faction
			[/item]
			[item]
				name="Ageless Random"
				value=random
			[/item]
			[item]
				name="Wheel of Fortune (changes every 8 turns)"
				value=ladder
			[/item]
		[/combo]
		[combo]
            id=QQ_AESS_difficulty_adjust
            default=0
            name=_"Difficulty level"
            description=_"Affects number of enemies and other variables"
            [item]
                name="Beginner"
                value=-2
            [/item]
            [item]
                name="Easy"
                value=-1
            [/item]
            [item]
                name="Normal"
                value=0
            [/item]
            [item]
                name="Hard"
                value=1
            [/item]
            [item]
                name="Hardcore"
                value=2
            [/item]
        [/combo]
        [combo]
            id=QQ_AESS_lava_pace
            default=normal
            name="Lava pace"
            description="How fast the lava approaches"
            [item]
                name="Slow (1 hex every 2 turns)"
                value=slow
            [/item]
            [item]
                name="Normal (1 hex every turn)"
                value=normal
            [/item]
            [item]
                name="Fast (2 hexes every turn)"
                value=fast
            [/item]
            [item]
                name="Wave 1-2-0"
                value=wave120
            [/item]
            [item]
                name="Wave 1-0-3"
                value=wave103
            [/item]
            [item]
                name="Wave 1-0-2-0"
                value=wave1020
            [/item]
			[item]
                name="Wave 1-0-1-0-0"
                value=wave10100
            [/item]
        [/combo]
		[slider]
			id=QQ_AESS_lava_hold
			default=0
			min=0
			max=3
			step=1
			name="Lava hold"
			description="Allows players to hold the lava for one turn (available in right click menu)"
		[/slider]
        [checkbox]
            id=QQ_AESS_cooperative_map
            default=no
            name=_"Cooperative map"
            description=_"No wall between the players"
        [/checkbox]
        [checkbox]
            id=QQ_AESS_lose_when_no_leader
            default=no
            name=_"Follow the leader"
            description=_"If selected, when leader dies so does the whole army"
        [/checkbox]
		[checkbox]
            id=QQ_AESS_fog_mode
            default=no
            name=_"Fog mode"
            description=_"Enable / Disable fog and enemy labels"
        [/checkbox]
        [checkbox]
            id=QQ_AESS_extra_debug
            default=no
            name=_"Display extra debug data"
            description=_"Useful for debugging and / or understanding the game flow"
        [/checkbox]
    [/options]
#enddef

#define GAME_OPTIONS_PVP
    [options]
        [combo]
            id=QQ_AESS_PVP_map_setting
            default=archipelago
            name=_"Map"
            description=_"Map name (map length)"
			[item]
                name="Forest (24)"
                value=forest
            [/item]
            [item]
                name="Prison (36)"
                value=prison
            [/item]
            [item]
                name="Mountains (48)"
                value=mountains
            [/item]
            [item]
                name="Standard TSW (60)"
                value=standard
            [/item]
			[item]
                name="Great Waters (69)"
                value=waters
            [/item]
            [item]
                name="Archipelago (72)"
                value=archipelago
            [/item]
        [/combo]
		[combo]
			id=QQ_AESS_PVP_wave_mode
			default="default"
			name="Wave mode"
			description="Select way the units are spawned"
			[item]
				name="Default (predefined)"
				value=default
			[/item]
			[item]
				name="Mirror (same player)"
				value=same
			[/item]
			[item]
				name="Mirror (opposite player)"
				value=opposite
			[/item]
			[item]
				name="Mirror (alternate every 8 turns)"
				value=alternate
			[/item]
			[item]
				name="Random Faction (changes every 8 turns) / in progress"
				value=faction
			[/item]
			[item]
				name="Ageless Random"
				value=random
			[/item]
			[item]
				name="Wheel of Fortune (changes every 8 turns)"
				value=ladder
			[/item]
		[/combo]
		[combo]
            id=QQ_AESS_PVP_difficulty_adjust
            default=0
            name=_"Difficulty level"
            description=_"Affects number of enemies and other variables"
            [item]
                name="Beginner"
                value=-2
            [/item]
            [item]
                name="Easy"
                value=-1
            [/item]
            [item]
                name="Normal"
                value=0
            [/item]
            [item]
                name="Hard"
                value=1
            [/item]
            [item]
                name="Hardcore"
                value=2
            [/item]
        [/combo]
        [combo]
            id=QQ_AESS_PVP_lava_pace
            default=normal
            name="Lava pace"
            description="How fast the lava approaches"
            [item]
                name="Slow (1 hex every 2 turns)"
                value=slow
            [/item]
            [item]
                name="Normal (1 hex every turn)"
                value=normal
            [/item]
            [item]
                name="Fast (2 hexes every turn)"
                value=fast
            [/item]
            [item]
                name="Wave 1-2-0"
                value=wave120
            [/item]
            [item]
                name="Wave 1-0-3"
                value=wave103
            [/item]
            [item]
                name="Wave 1-0-2-0"
                value=wave1020
            [/item]
			[item]
                name="Wave 1-0-1-0-0"
                value=wave10100
            [/item]
        [/combo]
		[slider]
			id=QQ_AESS_PVP_lava_hold
			default=0
			min=0
			max=3
			step=1
			name="Lava hold"
			description="Allows players to hold the lava for one turn (available in right click menu)"
		[/slider]
		[checkbox]
            id=QQ_AESS_PVP_lose_when_no_leader
            default=yes
            name=_"Follow the leader"
            description=_"If selected, when leader dies so does the whole army"
        [/checkbox]
        [checkbox]
            id=QQ_AESS_PVP_secret_mode
            default=no
            name=_"Secret mode"
            description=_"Covers the other player's section of the map in shroud"
        [/checkbox]
        [checkbox]
            id=QQ_AESS_PVP_spawn_destroyer
            default=no
            name=_"Spawn the final boss"
            description=_"If selected, you must defeat the final boss in order to win, otherwise you win when your opponent looses"
        [/checkbox]
		[checkbox]
            id=QQ_AESS_PVP_fog_mode
            default=no
            name=_"Fog mode"
            description=_"Enable / Disable fog and enemy labels"
        [/checkbox]
        [checkbox]
            id=QQ_AESS_PVP_extra_debug
            default=no
            name=_"Display extra debug data"
            description=_"Useful for debugging and / or understanding the game flow"
        [/checkbox]
    [/options]
#enddef

#define GAME_OPTIONS_3P
    [options]
        [combo]
            id=QQ_AESS_3P_map_setting
            default=archipelago
            name=_"Map"
            description=_"Map name (map length)"
			[item]
                name="Forest (24)"
                value=forest
            [/item]
            [item]
                name="Prison (36)"
                value=prison
            [/item]
            [item]
                name="Mountains (48)"
                value=mountains
            [/item]
            [item]
                name="Standard TSW (60)"
                value=standard
            [/item]
			[item]
                name="Great Waters (69)"
                value=waters
            [/item]
            [item]
                name="Archipelago (72)"
                value=archipelago
            [/item]
        [/combo]
		[combo]
			id=QQ_AESS_3P_wave_mode
			default="default"
			name="Wave mode"
			description="Select way the units are spawned"
			[item]
				name="Default (predefined)"
				value=default
			[/item]
			[item]
				name="Mirror (same player)"
				value=same
			[/item]
			[item]
				name="Mirror (opposite player)"
				value=opposite
			[/item]
			[item]
				name="Mirror (alternate every 8 turns)"
				value=alternate
			[/item]
			[item]
				name="Random Faction (changes every 8 turns) / in progress"
				value=faction
			[/item]
			[item]
				name="Ageless Random"
				value=random
			[/item]
			[item]
				name="Wheel of Fortune (changes every 8 turns)"
				value=ladder
			[/item]
		[/combo]
		[combo]
            id=QQ_AESS_3P_difficulty_adjust
            default=0
            name=_"Difficulty level"
            description=_"Affects number of enemies and other variables"
            [item]
                name="Beginner"
                value=-2
            [/item]
            [item]
                name="Easy"
                value=-1
            [/item]
            [item]
                name="Normal"
                value=0
            [/item]
            [item]
                name="Hard"
                value=1
            [/item]
            [item]
                name="Hardcore"
                value=2
            [/item]
        [/combo]
        [combo]
            id=QQ_AESS_3P_lava_pace
            default=normal
            name="Lava pace"
            description="How fast the lava approaches"
            [item]
                name="Slow (1 hex every 2 turns)"
                value=slow
            [/item]
            [item]
                name="Normal (1 hex every turn)"
                value=normal
            [/item]
            [item]
                name="Fast (2 hexes every turn)"
                value=fast
            [/item]
            [item]
                name="Wave 1-2-0"
                value=wave120
            [/item]
            [item]
                name="Wave 1-0-3"
                value=wave103
            [/item]
            [item]
                name="Wave 1-0-2-0"
                value=wave1020
            [/item]
            [item]
                name="Wave 1-0-1-0-0"
                value=wave10100
            [/item]
        [/combo]
		[slider]
			id=QQ_AESS_3P_lava_hold
			default=0
			min=0
			max=3
			step=1
			name="Lava hold"
			description="Allows players to hold the lava for one turn (available in right click menu)"
		[/slider]
        [checkbox]
            id=QQ_AESS_3P_lose_when_no_leader
            default=no
            name=_"Follow the leader"
            description=_"If selected, when leader dies so does the whole army"
        [/checkbox]
		[checkbox]
            id=QQ_AESS_3P_fog_mode
            default=no
            name=_"Fog mode"
            description=_"Enable / Disable fog and enemy labels"
        [/checkbox]
        [checkbox]
            id=QQ_AESS_3P_extra_debug
            default=no
            name=_"Display extra debug data"
            description=_"Useful only for debugging and understanding the game flow"
        [/checkbox]
    [/options]
#enddef

#define SET_MAP_TYPE_VARIABLES
    [switch]
        variable=map_setting
        [case]
            value=archipelago

			[set_variable]
				name=pvp_mask_file
				value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_archipelago_3.map}"
			[/set_variable]
			
            [if]
                [variable]
                    name=three_players_game
                    equals=yes
                [/variable]
				[or]
					[variable]
						name=cooperative_map
						equals=yes
					[/variable]
				[/or]
                [then]
                    [set_variable]
                        name=map_replacement
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_archipelago_3.map}"
                    [/set_variable]
                    [set_variable]
                        name=mask_file
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_archipelago_3.map}"
                    [/set_variable]
                [/then]
                [else]
					[set_variable]
						name=map_replacement
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_archipelago.map}"
					[/set_variable]
					[set_variable]
						name=mask_file
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_archipelago.map}"
					[/set_variable]
                [/else]
            [/if]
            [set_variables]
                name=game_settings
                mode=append
                [value]
                    negative_y=-78
                    scroll_rounds=78
                    destroyer_round=72
                    destroyer_ms_round=75
                    destroyer_type="AE_mag_Abaddon"
                    destroyer_hp=324
                    destroyer_mp=7
                    destroyer_x=27
                    destroyer_y=4
					map_factor_rounds=21
                    center_x=27
                    max_x=54
                    start_a_x=26
                    start_a_y=12
                    start_b_x=28
                    start_b_y=12
                    start_c_x=27
                    start_c_y=14
                    diff_label_x_a=2
                    diff_label_x_b=50
                    diff_label_y=20
                    taken_label_x_a=23
                    taken_label_x_b=31
                    taken_label_y=20
                    important=""
					xp_factor=0
					pvp_wall=64
					mirror_switch_round=14
                [/value]
            [/set_variables]
        [/case]
        [case]
            value=standard
			
			[set_variable]
				name=pvp_mask_file
				value="{~add-ons/Ageless_Scrolling_Survival/map/TSW_mask_3.map}"
			[/set_variable]

            [if]
                [variable]
                    name=three_players_game
                    equals=yes
                [/variable]
				[or]
					[variable]
						name=cooperative_map
						equals=yes
					[/variable]
				[/or]
                [then]
                    [set_variable]
                        name=map_replacement
                        value="{~add-ons/Ageless_Scrolling_Survival/map/TSW_start_3.map}"
                    [/set_variable]
                    [set_variable]
                        name=mask_file
                        value="{~add-ons/Ageless_Scrolling_Survival/map/TSW_mask_3.map}"
                    [/set_variable]
                [/then]
                [else]
					[set_variable]
						name=map_replacement
						value="{~add-ons/Ageless_Scrolling_Survival/map/TSW_start.map}"
					[/set_variable]
					[set_variable]
						name=mask_file
						value="{~add-ons/Ageless_Scrolling_Survival/map/TSW_mask.map}"
					[/set_variable]
                [/else]
            [/if]
            [set_variables]
                name=game_settings
                mode=append
                [value]
                    negative_y=-71
                    scroll_rounds=70
                    destroyer_round=60
                    destroyer_ms_round=63
                    destroyer_type="Fire Dragon"
                    destroyer_hp=202
                    destroyer_mp=6
                    destroyer_x=26
                    destroyer_y=4
                    map_factor_rounds=27
                    center_x=26
                    max_x=52
                    start_a_x=16
                    start_a_y=14
                    start_b_x=36
                    start_b_y=14
                    start_c_x=26
                    start_c_y=14
                    diff_label_x_a=4
                    diff_label_x_b=48
                    diff_label_y=19
                    taken_label_x_a=22
                    taken_label_x_b=30
                    taken_label_y=19
                    important=""
					xp_factor=0
					pvp_wall=58
					mirror_switch_round=16
                [/value]
            [/set_variables]
        [/case]
        [case]
            value=mountains

			[set_variable]
				name=pvp_mask_file
				value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_mountains_3.map}"
			[/set_variable]

            [if]
                [variable]
                    name=three_players_game
                    equals=yes
                [/variable]
				[or]
					[variable]
						name=cooperative_map
						equals=yes
					[/variable]
				[/or]
                [then]
                    [set_variable]
                        name=map_replacement
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_mountains_3.map}"
                    [/set_variable]
                    [set_variable]
                        name=mask_file
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_mountains_3.map}"
                    [/set_variable]
                [/then]
                [else]
					[set_variable]
						name=map_replacement
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_mountains.map}"
					[/set_variable]
					[set_variable]
						name=mask_file
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_mountains.map}"
					[/set_variable]
                [/else]
            [/if]
            [set_variables]
                name=game_settings
                mode=append
                [value]
                    negative_y=-53
                    scroll_rounds=57
                    destroyer_round=48
                    destroyer_ms_round=50
                    destroyer_type="AE_mag_Kirios"
                    destroyer_hp=199
                    destroyer_mp=6
                    destroyer_x=26
                    destroyer_y=4
					map_factor_rounds=20
                    center_x=26
                    max_x=52
                    start_a_x=18
                    start_a_y=13
                    start_b_x=34
                    start_b_y=13
                    start_c_x=26
                    start_c_y=14
                    diff_label_x_a=2
                    diff_label_x_b=50
                    diff_label_y=20
                    taken_label_x_a=22
                    taken_label_x_b=30
                    taken_label_y=20
                    important=""
					xp_factor=0
					pvp_wall=45
					mirror_switch_round=11
                [/value]
            [/set_variables]
        [/case]
        [case]
            value=prison

			[set_variable]
				name=pvp_mask_file
				value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_prison_3.map}"
			[/set_variable]

            [if]
                [variable]
                    name=three_players_game
                    equals=yes
                [/variable]
				[or]
					[variable]
						name=cooperative_map
						equals=yes
					[/variable]
				[/or]
                [then]
                    [set_variable]
                        name=map_replacement
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_prison_3.map}"
                    [/set_variable]
                    [set_variable]
                        name=mask_file
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_prison_3.map}"
                    [/set_variable]
                [/then]
                [else]
					[set_variable]
						name=map_replacement
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_prison.map}"
					[/set_variable]
					[set_variable]
						name=mask_file
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_prison.map}"
					[/set_variable]
                [/else]
            [/if]
            [set_variables]
                name=game_settings
                mode=append
                [value]
                    negative_y=-41
                    scroll_rounds=44
                    destroyer_round=36
                    destroyer_ms_round=41
                    destroyer_type="AE_mrc_enchanters_Powermad"
                    destroyer_hp=226
                    destroyer_mp=7
                    destroyer_x=26
                    destroyer_y=4
					map_factor_rounds=17
                    center_x=26
                    max_x=52
                    start_a_x=24
                    start_a_y=14
                    start_b_x=28
                    start_b_y=14
                    start_c_x=26
                    start_c_y=15
                    diff_label_x_a=2
                    diff_label_x_b=50
                    diff_label_y=20
                    taken_label_x_a=22
                    taken_label_x_b=30
                    taken_label_y=20
                    important=""
					xp_factor=-5
					pvp_wall=36
					mirror_switch_round=11
                [/value]
            [/set_variables]
        [/case]
        [case]
            value=forest

			[set_variable]
				name=pvp_mask_file
				value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_forest_3.map}"
			[/set_variable]

            [if]
                [variable]
                    name=three_players_game
                    equals=yes
                [/variable]
				[or]
					[variable]
						name=cooperative_map
						equals=yes
					[/variable]
				[/or]
                [then]
                    [set_variable]
                        name=map_replacement
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_forest_3.map}"
                    [/set_variable]
                    [set_variable]
                        name=mask_file
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_forest_3.map}"
                    [/set_variable]
                [/then]
                [else]
					[set_variable]
						name=map_replacement
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_forest.map}"
					[/set_variable]
					[set_variable]
						name=mask_file
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_forest.map}"
					[/set_variable]
                [/else]
            [/if]
            [set_variables]
                name=game_settings
                mode=append
                [value]
                    negative_y=-29
                    scroll_rounds=32
                    destroyer_round=24
                    destroyer_ms_round=27
                    destroyer_type="AE_agl_deep_Irr"
                    destroyer_hp=144
                    destroyer_mp=6
                    destroyer_x=26
                    destroyer_y=4
					map_factor_rounds=10
                    center_x=26
                    max_x=52
                    start_a_x=19
                    start_a_y=14
                    start_b_x=33
                    start_b_y=14
                    start_c_x=26
                    start_c_y=13
                    diff_label_x_a=2
                    diff_label_x_b=50
                    diff_label_y=20
                    taken_label_x_a=22
                    taken_label_x_b=30
                    taken_label_y=20
                    important="This map is in balancing stage."
					xp_factor=-15
					pvp_wall=25
					mirror_switch_round=12
                [/value]
            [/set_variables]
        [/case]
        [case]
            value=waters

			[set_variable]
				name=pvp_mask_file
				value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_great_waters_3.map}"
			[/set_variable]

            [if]
                [variable]
                    name=three_players_game
                    equals=yes
                [/variable]
				[or]
					[variable]
						name=cooperative_map
						equals=yes
					[/variable]
				[/or]
                [then]
                    [set_variable]
                        name=map_replacement
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_great_waters_3.map}"
                    [/set_variable]
                    [set_variable]
                        name=mask_file
                        value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_great_waters_3.map}"
                    [/set_variable]
                [/then]
                [else]
					[set_variable]
						name=map_replacement
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_start_great_waters.map}"
					[/set_variable]
					[set_variable]
						name=mask_file
						value="{~add-ons/Ageless_Scrolling_Survival/map/SS_mask_great_waters.map}"
					[/set_variable]
                [/else]
            [/if]
            [set_variables]
                name=game_settings
                mode=append
                [value]
                    negative_y=-76
                    scroll_rounds=76
                    destroyer_round=69
                    destroyer_ms_round=74
                    destroyer_type="AE_mag_Summons_Master"
                    destroyer_hp=205
                    destroyer_mp=6
                    destroyer_x=29
                    destroyer_y=4
					map_factor_rounds=20
                    center_x=29
                    max_x=58
                    start_a_x=14
                    start_a_y=10
                    start_b_x=44
                    start_b_y=10
                    start_c_x=29
                    start_c_y=11
                    diff_label_x_a=2
                    diff_label_x_b=56
                    diff_label_y=20
                    taken_label_x_a=26
                    taken_label_x_b=32
                    taken_label_y=20
                    important="This map is in balancing stage."
					xp_factor=0
					pvp_wall=70
					mirror_switch_round=15
                [/value]
            [/set_variables]
        [/case]
    [/switch]
#enddef

#define TELEPORT_LEADERS
	[if]
		[have_unit]
			side=7
			can_recruit=yes
		[/have_unit]
		[then]
			[store_unit]
				variable=leader_unit
				kill=yes
				[filter]
					side=7
					can_recruit=yes
					[not]
						type="Orcish Grunt"
					[/not]
				[/filter]
			[/store_unit]
			[unstore_unit]
				variable=leader_unit
				x,y=$game_settings[0].start_a_x,$game_settings[0].start_a_y
			[/unstore_unit]
			[object]
				silent=yes
				[filter]
					x,y=$game_settings[0].start_a_x,$game_settings[0].start_a_y
				[/filter]
				[effect]
					apply_to=max_experience
					increase="$game_settings[0].xp_factor|%"
				[/effect]
			[/object]
		[/then]
	[/if]
    {CLEAR_VARIABLE leader_unit}

	[if]
		[have_unit]
			side=8
			can_recruit=yes
		[/have_unit]
		[then]
			[store_unit]
				variable=leader_unit
				kill=yes
				[filter]
					side=8
					can_recruit=yes
					[not]
						type="Orcish Grunt"
					[/not]
				[/filter]
			[/store_unit]
			[unstore_unit]
				variable=leader_unit
				x,y=$game_settings[0].start_b_x,$game_settings[0].start_b_y
			[/unstore_unit]
			[object]
				silent=yes
				[filter]
					x,y=$game_settings[0].start_b_x,$game_settings[0].start_b_y
				[/filter]
				[effect]
					apply_to=max_experience
					increase="$game_settings[0].xp_factor|%"
				[/effect]
			[/object]
		[/then]
	[/if]
    {CLEAR_VARIABLE leader_unit}

	[if]
		[have_unit]
			side=9
			can_recruit=yes
		[/have_unit]
		[then]
			[store_unit]
				variable=leader_unit
				kill=yes
				[filter]
					side=9
					can_recruit=yes
					[not]
						type="Orcish Grunt"
					[/not]
				[/filter]
			[/store_unit]
			[unstore_unit]
				variable=leader_unit
				x,y=$game_settings[0].start_c_x,$game_settings[0].start_c_y
			[/unstore_unit]
			[object]
				silent=yes
				[filter]
					x,y=$game_settings[0].start_c_x,$game_settings[0].start_c_y
				[/filter]
				[effect]
					apply_to=max_experience
					increase="$game_settings[0].xp_factor|%"
				[/effect]
			[/object]
		[/then]
	[/if]
    {CLEAR_VARIABLE leader_unit}
#enddef
